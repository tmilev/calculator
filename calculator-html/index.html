<html lang = "en">
<head>
<link type = "text/css" rel = "stylesheet" href = "/calculator-html/styleCalculator.css"/>
<link type = "text/css" rel = "stylesheet" href = "/html-common/mathquill.css"/>
<link type = "text/css" rel = "stylesheet" href="/html-common/jquery-ui.css">
<script src = "/html-common/jquery.min.js"></script>
<script src = "/html-common/jquery-ui.min.js"></script>

<script type = "text/javascript" src = "/html-common/ace/src-min/ace.js" charset = "utf-8"></script>
<script src ="/html-common/ace/src-min/ext-language_tools.js"></script>
<!--script src = "/html-common/mathquill.min.js"></script-->
<script src = "/html-common/mathquill.min.js"></script>
<script type = "text/javascript">
  var globalMQ = MathQuill.getInterface(2);
  var MathQuillHasMatrixSupport = true;
  </script>
  <!--script src ="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">
</script-->
<script src = "https://apis.google.com/js/client:platform.js?onload=start" async defer></script>
<script type = "text/javascript" src = "/MathJax-2.7-latest/MathJax.js?config=TeX-AMS_HTML-full"></script>
<script type = "text/javascript" src = "/calculator-html/pathnames.js"></script>
<script type = "text/javascript" src = "/calculator-html/server_information.js"></script>
<script type = "text/javascript" src = "/calculator-html/ids_dom_elements.js"></script>
<script type = "text/javascript" src = "/calculator-html/modifiable_database_fields.js"></script>
<script type = "text/javascript" src = "/calculator-html/miscellaneous.js"></script>
<script type = "text/javascript" src = "/calculator-html/json_to_html.js"></script>
<script type = "text/javascript" src = "/calculator-html/mathjax-calculator-setup.js"></script>
<script type = "text/javascript" src = "/calculator-html/hide_html_with_tags.js"></script>
<script type = "text/javascript" src = "/calculator-html/cookies.js"></script>
<script type = "text/javascript" src = "/calculator-html/submit_requests.js"></script>
<script type = "text/javascript" src = "/calculator-html/autocomplete_keywords.js"></script>
<script type = "text/javascript" src = "/calculator-html/autocomplete.js"></script>
<script type = "text/javascript" src = "/calculator-html/panels.js"></script>
<script type = "text/javascript" src = "/calculator-html/initialize_buttons.js"></script>
<script type = "text/javascript" src = "/calculator-html/page_navigation.js"></script>
<script type = "text/javascript" src = "/calculator-html/three-d.js"></script>
<script type = "text/javascript" src = "/calculator-html/graphics_n_dimensions.js"></script>
<script type = "text/javascript" src = "/calculator-html/course_page.js"></script>
<script type = "text/javascript" src = "/calculator-html/problem_page.js"></script>
<script type = "text/javascript" src = "/calculator-html/select_course.js"></script>
<script type = "text/javascript" src = "/calculator-html/login.js"></script>
<script type = "text/javascript" src = "/calculator-html/signup.js"></script>
<script type = "text/javascript" src = "/calculator-html/forgot_password.js"></script>
<script type = "text/javascript" src = "/calculator-html/database.js"></script>
<script type = "text/javascript" src = "/calculator-html/server_status.js"></script>
<script type = "text/javascript" src = "/calculator-html/account.js"></script>
<script type = "text/javascript" src = "/calculator-html/account_activation.js"></script>
<script type = "text/javascript" src = "/calculator-html/manage_accounts.js"></script>
<script type = "text/javascript" src = "/calculator-html/edit_page.js"></script>
<script type = "text/javascript" src = "/calculator-html/calculator_page.js"> </script>
<script type = "text/javascript" src = "/calculator-html/app.js"></script>
<script type = "text/javascript" src = "/calculator-html/external/build/output.js"></script>

<script type = "text/javascript">
"use strict";
function Browserifier() {
  this.allModules = {
  };
  this.sanitizedFileNameContents = {};
}

Browserifier.prototype.require = function (inputFileName) {
  var currentSource = this.sanitizedFileNameContents[inputFileName];
  if (! (inputFileName in this.allModules)) {
    this.allModules[inputFileName] = {};
  }
  var currentModule = this.allModules[inputFileName];
  if (!currentModule.flagLoaded) {
    currentModule.flagLoaded = true;
    currentSource(this.require.bind(this), currentModule);
  }
  return currentModule.exports;
}

Browserifier.prototype.browserify = function() {
  //console.log(`Debug: js content keys: ` + Object.keys(theJSContent));
  var expectedStart = "/calculator" + "-html/"; 
  //<- please keep strings separated; the cpp builder auto-replaces the string /calculator-html
  //<- To do: fix this.
  for (var fileName in theJSContent) {
    var newFileName = "";
    if (!fileName.startsWith(expectedStart)) {
      continue;
    }
    var fileEnd = fileName.slice(expectedStart.length);
    newFileName = `./${fileEnd}`;
    this.sanitizedFileNameContents[newFileName] = theJSContent[fileName];
  }
  this.require('./app');
}

function browserify() {
  window.browserifier = new Browserifier();
  window.browserifier.browserify();
}
</script>

<script src ='https://www.google.com/recaptcha/api.js'></script>

<meta name = "google-signin-client_id" content = "538605306594-n43754vb0m48ir84g8vp5uj2u7klern3.apps.googleusercontent.com">
<title>Calculator</title>
</head>
<body onload = "browserify();">
<div id = "divPage"> 

<div id = "divLoginPage" class = "divMainPage">
<div class = "centerHorizontallyInPageContainer">
  <div class = "centerVerticallyInPageContainer">
  <div class = "divCenteredItem divVisible" id = "divLoginCalculatorPanel">
    <b>Local account:</b><br><br>
    <input class = "textInputUsername" type = "text" id = "inputUsername" name = "username" placeholder = "username" required><br>
    <input class = "textInputUsername" type = "password" id = "inputPassword" name = "password" placeholder = "password" onkeypress = "if (event.keyCode === 13) window.calculator.login.loginCalculator();" autocomplete = "on"><br>
    <button class = "buttonSelectPage" onclick = "window.calculator.login.loginCalculator();">Login</button><br>
    <button class = "buttonSignUp"     onclick = "window.calculator.signUp.signUp();">Sign up</button><br>
    <button class = "buttonSignUp"     onclick = "window.calculator.forgotLogin.forgotLoginPage();">Forgot login</button><br>
  </div> <!--divLoginCalculatorPanel-->
  <div class = "divCenteredItem">
    <a href = "#" onclick = "window.calculator.login.logout();" class = "linkLogoutInactive linkStandardButtonLike" >Log out</a> 
  </div><!--divCenteredItem-->
  <div class = "divCenteredItem">
    <b>Google login:</b>
    <div id = "divGoogleLoginButton">Google unavailable (did page fully load? Internet?).</div>
  </div><!--divCenteredItem-->
  <div class = "divCenteredItem">
    <small> We do not have (and do not wish to have) access 
      <br> to your google password or other sensitive information. 
      <br> We only store your email for registration, password recovery,
      <br> and for use as username if you don't want to select one.
      <br> You are most welcome to use the site without login/account.
    </small>
  </div><!--divCenteredItem-->
  <div class = "divCenteredItem">
    <div id = "spanLoginStatus" style = "height: 15px; width: 190px; text-align: center"></div>
  </div>
  </div><!--centerVerticallyInPageContainer-->
</div><!--centerHorizontallyInPageContainer-->
</div><!--divLoginPage-->
<div id = "divSignUpPage" class = "divMainPage">
  <table>
    <tr>
    <td>Desired user name:</td>
    <td>
      <input type = "text" id = "desiredUsername" name = "desiredUsername" placeholder = "username">
    </td>
    </tr>
    <tr>
      <td>Email:</td>
      <td><input type = "text" id = "emailForSignUp" placeholder = "email"></td>
    </tr>
  </table>
  <div id = "recaptchaSignUp"></div>
  <button onclick = "window.calculator.signUp.submitSignUpInfo();">Sign up</button>
  <span id = "signUpResultReport"></span>
  <br>
  <span id = "signUpResult"></span>
</div><!--divSignUpPage-->
<div id = "divForgotLogin" class = "divMainPage">
  <table>
  <tr><td> Email:</td><td><input type = "text" id = "emailForForgotLogin" placeholder = "email"></td></tr>
  </table>
  <div id = "recaptchaForgotPassword"></div>
  <button onclick = "window.calculator.forgotLogin.submitForgotPassword();">Send recovery email</button><span id = "forgotLoginResultReport"></span>
  <br>
  <span id = "forgotLoginResult"></span>
</div><!--divForgotLogin-->
  
<div id = "divProblemPage" class = "divMainPage">
  <div id = "divProblemPageContentContainer">
  </div><!--divProblemPageContentContainer-->
</div><!--divProblemPage-->
<div id = "divEditPage" class = "divMainPage">
  <div id = "divEditPageContainer">
  <button class = "buttonSaveEdit" onclick = "storeEditedPage();">Save</button> 
  <span id = "spanSubmitEditPageReport"></span><br>
  <textarea id = "textareaTopicListEntry"></textarea>
  <div id = "divEditorAce" onkeydown = "window.calculator.editPage.ctrlSPressAceEditorHandler(event);" name = "divEditorAce">
  </div>
  </div>
</div>
<div id = "divCurrentCourse" class = "divMainPage">
  <div id = "divCurrentCourseEditPanel"></div>
  <div id = "divCurrentCourseBody"></div>
</div> <!--divCurrentCourse-->
  
<div id = "divSelectCourse" class = "divMainPage">
</div> <!--divSelectCourse-->

<div id = "divCalculatorPage" class = "divMainPage">

<table id = "tableCalculatorExamples" class = "tableCalculatorInputs">
<tr><td>
<table id = "tableCalculatorAndOutput" class = "tableCalculatorInputs">
<tr><td>
<table class = "tableCalculatorInputs"><tr>
<td>
  <input type = "hidden" name = "request" id = "request" value = "compute">
  <textarea class = "textareaCalculatorMain"
  rows = "3" cols = "30" name = "mainInput" id = "mainInputID"
  onkeypress = "window.calculator.calculator.submitCalculatorInputOnEnter();"
  onkeyup    = "window.calculator.autocomplete.suggestWord(); window.calculator.initializeButtons.calculatorPanel.mQHelpCalculator();"
  onkeydown  = "window.calculator.autocomplete.suggestWord(); window.calculator.initializeButtons.calculatorPanel.mQHelpCalculator(); window.calculator.autocomplete.arrowAction(event);"
  onmouseup  = "window.calculator.autocomplete.suggestWord(); window.calculator.initializeButtons.calculatorPanel.mQHelpCalculator();"
  oninput    = "window.calculator.autocomplete.suggestWord(); window.calculator.initializeButtons.calculatorPanel.mQHelpCalculator();"></textarea>
</td>
<td>
  <span id = "mqPanelComments" style = "white-space:nowrap"> Equation assistant</span>
  <br>
  <span style = "vertical-align:top" id = "mainInputMQfield"></span>
</td>
<td>
  <div class = "mqButtonPanel" style = "vertical-align:top" id = "mainInputMQfieldButtons" buttons = "algebra, logarithms, integrals, matrices"></div>
</td>
<td>
  <span id = "spanDebugCalculatorPage">
  </span>      
</td>
<td>
  <span id = "idAutocompletePanel">
  <span id = "idAutocompleteHints">
    Ctrl+space, ctrl+arrow = autocomplete, select
  </span>
  <br>
  <div id = "idAutocompleteSpan" style = "display:block; overflow:auto;" height = "100px"></div>
  <span id = "idAutocompleteDebug"></span>      
  </span>  
</td>
</tr>
</table>
</td></tr>
<tr><td>
<table>
  <tr>
    <td>
    <button class = "buttonPreview" title = "Shift + Enter = shortcut from input text box. " name = "Go" onclick = "window.calculator.calculator.submitComputation(); event.preventDefault();">
    Go
    </button>
    <span id = "spanProgressCalculatorInput"></span>
    <br>
    <span id = "spanComputationLink"></span>
    </td>
  </tr>  
  <tr>
  <td>
    <span id = "spanCalculatorMainOutput"></span>
  </td>
  </tr>      
</table>
</td></tr>
</table> <!--tableCalculatorAndOutput-->

</td><td>
  <span id = "spanCalculatorExamplesContainer">
  <button onclick = "window.calculator.calculator.toggleExamples(this)" class = "buttonToggleTopics">&#9656;</button> Examples
  <span id = "spanProgressCalculatorExamples"></span>
  <div id = "divCalculatorExamples">
  </div><!--divCalculatorExamples-->
  </span>
</td></tr>
</table><!--tableCalculatorExamples-->
</div><!--divCalculatorPage-->
<div id = "divAboutPage" class = "divMainPage">
  <h2> Project mission</h2>
  The mission of the calculator project is, to the extent possible,
  <blockquote>
  to develop a universally accessible, free and open source computer algebra system covering
  all computational aspects of mathematical research and math education, 
  using an intuitive and user friendly interface that gives 
  full programmatic control over the system to its users.
  </blockquote>
  
  <h2>About the software</h2>
  The calculator is free and open source software. The calculator's <a href="https://github.com/tmilev/calculator" target="_blank">source code is here</a>.
  The code is to be compiled on a Linux machine.
  
  <br>
  <br>
  The system should work out of the box on your own Linux machine (on localhost). 
  When installed locally, you access the system through your browser and get the admin password on first login.  
  However, if you wish to run the calculator open to the entire internet, you will have to do quite a bit of extra work - just as with any website.
  For example, you will need to get your own officially signed security certificates. 
  If you need help setting up the calculator on your linux machine, write me an email
  (todor.milev at google's email).
  
  <h3>Software license</h3>
  The software is licensed to you under the <a href = 'https://www.apache.org/licenses/LICENSE-2.0', target = "_blank">Apache License, Version 2.0</a>.
  This is a permissive free software license which, roughly speaking, states that you
  are free to use the calculator, install it on your machine, use it to run your website, 
  modify its source code to suit your needs and redistribute the resulting work. 
  <br>
  <br>
  The calculator is fully functional without any homework/problem files, 
  and provides facilities for creating such. 
  All of my materials were created through the calculator interface. 
  Should you install the calculator on your own machine and 
  create your own homework problems, 
  you own the copyright to the resulting files; those are not subject  
  to the Apache License. 
  <br>
  <br>
  The homework problems located at www.calculator-algebra.org are private and are not subject to the 
  Apache License.
  
  If you have any questions about this project, write me an email (todor.milev at google's email). I am interested in both academic and business opportunities for developing 
  both educational and general mathematical software. 
</div><!--divAboutPage-->
<div id = "divDatabase" class = "divMainPage">
  <button class = "buttonStandard" onclick = "window.calculator.database.updateDatabasePageResetCurrentTable();">Tables</button>
<div id = "divDatabaseOutput"> </div>
</div>
<div id = "divAccount" class = "divMainPage">
  <table>
  <tr><td>User:</td><td> <span id = "spanUserIdInAccountsPage"></span></td></tr>
  <tr>
  <td>Current password:</td>
  <td>
  <input class = "textInputUsername" type = "password" id = "inputOldPasswordInAccount" name = "password" placeholder = "password" autocomplete = "on">
  </td>
  </tr>
  <tr>
    <td>New password:</td>
    <td>
      <input class = "textInputUsername" type = "password" id = "inputNewPasswordInAccount" name = "password" placeholder = "password" autocomplete = "on">
    </td>
  </tr>
  <tr>
    <td>Re-enter:</td>
    <td>
      <input class = "textInputUsername" type = "password" id = "inputReenteredPasswordInAccount" name = "password" placeholder = "password" autocomplete = "on">
    </td>
  </tr>
  </table>
  <button class = "buttonStandard" onclick = "window.calculator.account.submitChangePassRequest()">Change password</button>
  <table>
  <tr><td>Current email:</td><td><span id = 'spanOldEmail'></span></td></tr>
  <tr>
    <td id = "labelNewEmail">New email:</td>
    <td>
      <input class = "textInputUsername" type = "text" id = "inputEmail" placeholder = "email" autocomplete = "on">
    </td>
  </tr>
  </table>
  <button class = "buttonStandard" onclick = "window.calculator.account.submitChangePassRequest()" id = "buttonChangeEmail">Change email</button> 
  <br>
  <span id = "spanVerification"></span> 
  <hr>
  <span id = "spanUserExtraInfo"></span>
</div>

<div id = "divActivateAccount" class = "divMainPage">
  <table>
  <tr><td>User:</td><td><span id = "spanUserIdInActivateAccountPage"></span></td></tr>
  <tr><td>Current email:</td><td><span id = "spanCurrentActivationEmail"></span></td></tr>
  <tr><td>Activation token:</td><td><span id = "spanCurrentActivationToken"></span></td></tr>
  <tr>
  <td>New password:</td>
  <td>
    <input class = "textInputUsername" type = "password" id = "inputNewPasswordInActivationAccount" name = "password" placeholder = "password" autocomplete = "on">
  </td>
  </tr>
  <tr>
  <td>Re-enter:</td>
  <td>
    <input class = "textInputUsername" type = "password" id = "inputReenteredPasswordInActivationAccount" name = "password" placeholder = "password" autocomplete = "on">
  </td>
  </tr>
  </table>
  <button class = "buttonStandard" onclick = "window.calculator.accountActivation.submitActivateAccountRequest()">Change password</button>
  <span id = "spanVerificationActivation"></span>
</div>

<div id = "divAccounts" class = "divMainPage">
  <div id = "idAccountsOutput">
    Assign section(s) to teacher(s).
    <br>
    <textarea width = "500px" id = "inputSetTeacher" placeholder = "email or user list, comma, space or ; separated"></textarea>
    <textarea width = "500px" id = "inputSections" placeholder = "list of sections"></textarea>
    <br>
    <button class = "buttonNormal" onclick = "getTeachersStudents()"> Set teacher</button>
    <br><span id = "idOutputSections"></span>
    <br>
    <ul>
      <li>Add <b>admin(s)</b> here.</li> 
      <li>Added/updated users will have their current course set to: <br>
        <span class ="currentCourseIndicator"></span>
      </li>
      <li>To change course use the select course link in the navigation panel.</li>
      <li>List users with a comma/space bar/new line/tab/semicolumn separated list. </li>
      <li>List default passwords with a similarly separated list.</li> 
      <li>If left blank, password(s) are not (re)set.</li> 
      <li>If the password entries are not left blank and the number of passwords does not match the number of added users, the operation will fail (no users will be added).</li> 
    </ul>
    <textarea width = "500px" id = "inputAddUsersadmin" placeholder = "admin list, comma, space or ; separated"></textarea>
    <textarea width = "500px" id = "inputAddDefaultPasswordsadmin" placeholder = "default passwords"></textarea>
    <textarea width = "500px" id = "inputAddExtraInfoadmin" placeholder = "section/class #"></textarea>
    <br>
    <button class = "buttonNormal" onclick = "window.calculator.manageAccounts.addEmailsOrUsers('inputAddUsersadmin', '', 'idOutputAdmins', 'admin', 'inputAddExtraInfoadmin', 'inputAddDefaultPasswordsadmin', 'addUsers' )"> Add users</button> 
    <br>
    <span id = "idOutputAdmins"></span>
    <ul>
      <li>Add <b>student(s)</b> here.</li> 
      <li>Added/updated users will have their current course set to: <br>
        <span class ="currentCourseIndicator"></span>
      </li>
      <li>To change course use the select course link in the top panel.</li>
      <li>List users with a comma/space bar/new line/tab/semicolumn separated list. </li>
      <li>List default passwords with a similarly separated list.</li> 
      <li>If left blank, password(s) are not (re)set.</li> 
      <li>If the password entries are not left blank and the number of passwords does not match the number of added users, the operation will fail (no users will be added).</li> 
    </ul>
    <textarea width = "500px" id = "inputAddUsersstudent" placeholder = "user list, comma, space or ; separated"></textarea>
    <textarea width = "500px" id = "inputAddDefaultPasswordsstudent" placeholder = "default passwords"></textarea>
    <textarea width = "500px" id = "inputAddExtraInfostudent" placeholder = "section/class #"></textarea>
    <br>
    <button class = "normalButton" onclick = "window.calculator.manageAccounts.addEmailsOrUsers('inputAddUsersstudent', '', 'idOutputStudents', 'student', 'inputAddExtraInfostudent', 'inputAddDefaultPasswordsstudent', 'addUsers' )"> Add users</button>
    <br>
    <span id = "idOutputStudents"></span>
  </div>
</div>

<div id = "divServer" class = "divMainPage">
  <div id = "idServerStatus">
  </div>
</div>

<div id = "divTheMainMenuPanel" class = "divTheMainMenu">
<div class = "divLoginPanel">
  <button id = "buttonToggleTheMainMenu" onclick = "window.calculator.panels.toggleMenu(this);" class = "buttonToggleTopics">
  &#9660;
  </button>
  <div id = "divProfilePicture" class = "divProfilePictureContainerExpanded divInvisible"></div>
  <div id = "divLoginPanelUsernameReport" class = "divInvisible divSmall" style = "margin: 4px"></div>
  <a href = "#" onclick = "window.calculator.login.logout();" class = "linkLogoutInactive linkStandardButtonLike">Log out</a> 
</div>
<div><button class = "buttonSelectPage" id = "buttonLoginPage">Login</button></div>
<div><button class = "buttonSelectPage" id = "buttonProblemPage">Current problem</button></div>
<div><button class = "buttonSelectPage" id = "buttonCurrentCourse">Current course</button></div>
<div><button class = "buttonSelectPage" id = "buttonSelectCourse">Select course</button></div>
<div><button class = "buttonSelectPage" id = "buttonSelectCalculator">Calculator</button></div>
<div><button class = "buttonSelectPage" id = "buttonAboutPage">About</button></div>
<div class = "divMenuSeparator divAccountPanel divInvisible">Account</div>
<div class = "divAccountPanel divInvisible"><button class = "buttonSelectPage" id = "buttonSelectAccount">Account</button></div>

<div class = "divMenuSeparator divAdminPanel divInvisible">Admin</div>
<div class = "divAdminPanel divInvisible"><button class = "buttonSelectPage" id = "buttonEditPage">Edit</button></div>
<div class = "divAdminPanel divInvisible"><button class = "buttonSelectPage" id = "buttonSelectAccounts">Accounts</button></div>
<div class = "divAdminPanel divInvisible"><button class = "buttonSelectPage" id = "buttonSelectDatabase">Database</button></div>
<div class = "divAdminPanel divInvisible"><button class = "buttonSelectPage" id = "buttonSelectServer">Server</button></div>
<br>
<div> 
  <div><!--div containing debug flag-->
  <label class = "switch">
    <input id = "sliderDebugFlag" type = "checkbox" onchange = "window.calculator.mainPage.flipDebugSwitch();">
    <span class = "slider round"></span>
  </label><span id = "spanDebugFlagToggleReport">-</span>
  </div><!--div containing debug flag-->
</div>
  <div id = "spanProgressReportGeneral" class = "spanProgressReport"></div>
<div id = "spanStudentViewPanel">
<div>
  <label class = "switch">
  <input id = "sliderStudentView" type = "checkbox" onchange = "window.calculator.mainPage.flipStudentView();">
  <span class = "slider round"></span>
</label><span id = "spanStudentViewToggleReport">-</span>
</div>
<div>
<span id = "spanStudentViewSectionSelectPanel">  
</span>
</div>
</div>

<div style = "text-align: center; font-size: small;">
<a href = "https://github.com/tmilev/calculator" id = "anchorCalculatorBuildVersion" target = "_blank"></a>
<a href = "https://github.com/tmilev/calculator/issues" target = "_blank">Issues/bugs</a>
</div>
</div> <!--divTheMainMenuPanel-->
  
</div><!--divMainPage-->

</body>
</html>
